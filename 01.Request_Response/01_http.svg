<svg viewBox="0 0 1200 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 24px; font-weight: bold; text-anchor: middle; }
      .subtitle { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
      .section-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: start; }
      .component { font-family: Arial, sans-serif; font-size: 14px; text-anchor: middle; font-weight: bold; }
      .label { font-family: Arial, sans-serif; font-size: 12px; text-anchor: start; }
      .code { font-family: 'Courier New', monospace; font-size: 11px; text-anchor: start; }
      .arrow { stroke: #2196f3; stroke-width: 3; fill: none; marker-end: url(#arrowhead); }
      .return-arrow { stroke: #4caf50; stroke-width: 3; fill: none; marker-end: url(#arrowhead-green); }
      .step-number { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; fill: white; }
    </style>
    <marker id="arrowhead" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#2196f3" />
    </marker>
    <marker id="arrowhead-green" markerWidth="12" markerHeight="8" refX="12" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#4caf50" />
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="1200" height="1000" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="600" y="40" class="title" fill="#2c3e50">HTTP Request と Response の流れ</text>
  
  <!-- Client Browser -->
  <rect x="50" y="100" width="200" height="100" rx="10" fill="#e3f2fd" stroke="#1976d2" stroke-width="2"/>
  <text x="150" y="130" class="component" fill="#1976d2">クライアント</text>
  <text x="150" y="150" class="component" fill="#1976d2">(Webブラウザ)</text>
  <text x="150" y="170" class="label" fill="#1976d2">例: Chrome, Firefox</text>
  
  <!-- Web Server -->
  <rect x="900" y="100" width="200" height="100" rx="10" fill="#ffebee" stroke="#d32f2f" stroke-width="2"/>
  <text x="1000" y="130" class="component" fill="#d32f2f">Webサーバー</text>
  <text x="1000" y="150" class="component" fill="#d32f2f">(Apache/Nginx)</text>
  <text x="1000" y="170" class="label" fill="#d32f2f">例: www.example.com</text>
  
  <!-- Request Arrow -->
  <line x1="250" y1="130" x2="900" y2="130" class="arrow"/>
  <text x="575" y="120" class="subtitle" fill="#2196f3">1. HTTP Request</text>
  
  <!-- Response Arrow -->
  <line x1="900" y1="170" x2="250" y2="170" class="return-arrow"/>
  <text x="575" y="190" class="subtitle" fill="#4caf50">2. HTTP Response</text>
  
  <!-- Step Numbers -->
  <circle cx="400" cy="130" r="15" fill="#2196f3"/>
  <text x="400" y="135" class="step-number">1</text>
  
  <circle cx="750" cy="170" r="15" fill="#4caf50"/>
  <text x="750" y="175" class="step-number">2</text>
  
  <!-- HTTP Request Details -->
  <rect x="50" y="250" width="500" height="350" rx="10" fill="#ffffff" stroke="#2196f3" stroke-width="2"/>
  <text x="300" y="280" class="subtitle" fill="#2196f3">HTTP Request の構造</text>
  
  <!-- Request Line -->
  <rect x="70" y="300" width="460" height="40" fill="#e3f2fd" stroke="#1976d2" stroke-width="1"/>
  <text x="80" y="315" class="section-title" fill="#1976d2">Request Line (リクエストライン)</text>
  <text x="80" y="330" class="code" fill="#333">GET /index.html HTTP/1.1</text>
  
  <!-- Request Headers -->
  <rect x="70" y="350" width="460" height="120" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="1"/>
  <text x="80" y="365" class="section-title" fill="#7b1fa2">Headers (ヘッダー)</text>
  <text x="80" y="380" class="code" fill="#333">Host: www.example.com</text>
  <text x="80" y="395" class="code" fill="#333">User-Agent: Mozilla/5.0 (Windows NT 10.0)</text>
  <text x="80" y="410" class="code" fill="#333">Accept: text/html,application/xhtml+xml</text>
  <text x="80" y="425" class="code" fill="#333">Accept-Language: ja,en-US;q=0.9</text>
  <text x="80" y="440" class="code" fill="#333">Connection: keep-alive</text>
  <text x="80" y="455" class="code" fill="#333">Cookie: sessionid=abc123xyz</text>
  
  <!-- Request Body -->
  <rect x="70" y="480" width="460" height="60" fill="#fff3e0" stroke="#f57c00" stroke-width="1"/>
  <text x="80" y="495" class="section-title" fill="#f57c00">Body (ボディ) - POSTの場合</text>
  <text x="80" y="510" class="code" fill="#333">name=田中太郎&amp;email=tanaka@example.com</text>
  <text x="80" y="525" class="code" fill="#333">または JSON: {"name": "田中太郎"}</text>
  
  <!-- Request Method Details -->
  <rect x="70" y="550" width="460" height="40" fill="#e8f5e8" stroke="#388e3c" stroke-width="1"/>
  <text x="80" y="565" class="section-title" fill="#388e3c">主要なHTTPメソッド</text>
  <text x="80" y="580" class="label" fill="#333">GET: データ取得 | POST: データ送信 | PUT: データ更新 | DELETE: データ削除</text>
  
  <!-- HTTP Response Details -->
  <rect x="650" y="250" width="500" height="400" fill="#ffffff" stroke="#4caf50" stroke-width="2"/>
  <text x="900" y="280" class="subtitle" fill="#4caf50">HTTP Response の構造</text>
  
  <!-- Status Line -->
  <rect x="670" y="300" width="460" height="40" fill="#e8f5e8" stroke="#388e3c" stroke-width="1"/>
  <text x="680" y="315" class="section-title" fill="#388e3c">Status Line (ステータスライン)</text>
  <text x="680" y="330" class="code" fill="#333">HTTP/1.1 200 OK</text>
  
  <!-- Response Headers -->
  <rect x="670" y="350" width="460" height="140" fill="#f3e5f5" stroke="#7b1fa2" stroke-width="1"/>
  <text x="680" y="365" class="section-title" fill="#7b1fa2">Headers (ヘッダー)</text>
  <text x="680" y="380" class="code" fill="#333">Content-Type: text/html; charset=UTF-8</text>
  <text x="680" y="395" class="code" fill="#333">Content-Length: 1024</text>
  <text x="680" y="410" class="code" fill="#333">Server: Apache/2.4.41</text>
  <text x="680" y="425" class="code" fill="#333">Set-Cookie: sessionid=xyz789abc</text>
  <text x="680" y="440" class="code" fill="#333">Cache-Control: max-age=3600</text>
  <text x="680" y="455" class="code" fill="#333">Last-Modified: Wed, 21 Oct 2024 07:28:00 GMT</text>
  <text x="680" y="470" class="code" fill="#333">Date: Thu, 22 Oct 2024 12:00:00 GMT</text>
  
  <!-- Response Body -->
  <rect x="670" y="500" width="460" height="100" fill="#fff3e0" stroke="#f57c00" stroke-width="1"/>
  <text x="680" y="515" class="section-title" fill="#f57c00">Body (ボディ)</text>
  <text x="680" y="530" class="code" fill="#333">&lt;!DOCTYPE html&gt;</text>
  <text x="680" y="545" class="code" fill="#333">&lt;html&gt;</text>
  <text x="680" y="560" class="code" fill="#333">  &lt;head&gt;&lt;title&gt;ホームページ&lt;/title&gt;&lt;/head&gt;</text>
  <text x="680" y="575" class="code" fill="#333">  &lt;body&gt;&lt;h1&gt;ようこそ！&lt;/h1&gt;&lt;/body&gt;</text>
  <text x="680" y="590" class="code" fill="#333">&lt;/html&gt;</text>
  
  <!-- Status Code Details -->
  <rect x="670" y="610" width="460" height="30" fill="#ffebee" stroke="#d32f2f" stroke-width="1"/>
  <text x="680" y="625" class="section-title" fill="#d32f2f">主要なステータスコード</text>
  <text x="680" y="635" class="label" fill="#333">200: OK | 404: Not Found | 500: Internal Server Error | 301: Moved Permanently</text>
  
  <!-- Communication Flow -->
  <rect x="50" y="680" width="1100" height="280" rx="10" fill="#ffffff" stroke="#607d8b" stroke-width="2"/>
  <text x="600" y="710" class="subtitle" fill="#607d8b">詳細な通信フロー</text>
  
  <!-- Timeline -->
  <line x1="100" y1="740" x2="1100" y2="740" stroke="#ddd" stroke-width="2"/>
  
  <!-- Flow Steps -->
  <g>
    <!-- Step 1 -->
    <circle cx="200" cy="740" r="20" fill="#2196f3"/>
    <text x="200" y="745" class="step-number">1</text>
    <text x="140" y="770" class="label" fill="#2196f3">ユーザーがURL入力</text>
    <text x="140" y="785" class="label" fill="#2196f3">またはリンククリック</text>
    
    <!-- Step 2 -->
    <circle cx="350" cy="740" r="20" fill="#2196f3"/>
    <text x="350" y="745" class="step-number">2</text>
    <text x="290" y="770" class="label" fill="#2196f3">DNS名前解決</text>
    <text x="290" y="785" class="label" fill="#2196f3">IPアドレス取得</text>
    
    <!-- Step 3 -->
    <circle cx="500" cy="740" r="20" fill="#2196f3"/>
    <text x="500" y="745" class="step-number">3</text>
    <text x="440" y="770" class="label" fill="#2196f3">TCP接続確立</text>
    <text x="440" y="785" class="label" fill="#2196f3">3-way handshake</text>
    
    <!-- Step 4 -->
    <circle cx="650" cy="740" r="20" fill="#2196f3"/>
    <text x="650" y="745" class="step-number">4</text>
    <text x="590" y="770" class="label" fill="#2196f3">HTTPリクエスト送信</text>
    <text x="590" y="785" class="label" fill="#2196f3">メソッド、URL、ヘッダー</text>
    
    <!-- Step 5 -->
    <circle cx="800" cy="740" r="20" fill="#4caf50"/>
    <text x="800" y="745" class="step-number">5</text>
    <text x="740" y="770" class="label" fill="#4caf50">サーバー処理</text>
    <text x="740" y="785" class="label" fill="#4caf50">リクエスト解析・応答生成</text>
    
    <!-- Step 6 -->
    <circle cx="950" cy="740" r="20" fill="#4caf50"/>
    <text x="950" y="745" class="step-number">6</text>
    <text x="890" y="770" class="label" fill="#4caf50">HTTPレスポンス送信</text>
    <text x="890" y="785" class="label" fill="#4caf50">ステータス、ヘッダー、ボディ</text>
  </g>
  
  <!-- Key Points -->
  <rect x="100" y="810" width="1000" height="130" fill="#f5f5f5" stroke="#999" stroke-width="1"/>
  <text x="600" y="830" class="section-title" fill="#333">重要なポイント</text>
  
  <text x="120" y="850" class="label" fill="#333">• <tspan font-weight="bold">ステートレス</tspan>: HTTPは各リクエストが独立しており、サーバーは前のリクエストを記憶しない</text>
  <text x="120" y="865" class="label" fill="#333">• <tspan font-weight="bold">ヘッダーの役割</tspan>: 通信の制御情報、認証、キャッシュ制御、コンテンツタイプなどを指定</text>
  <text x="120" y="880" class="label" fill="#333">• <tspan font-weight="bold">ボディの使用</tspan>: GETでは通常空、POSTでフォームデータやJSONを送信</text>
  <text x="120" y="895" class="label" fill="#333">• <tspan font-weight="bold">ステータスコード</tspan>: 2xx(成功)、3xx(リダイレクト)、4xx(クライアントエラー)、5xx(サーバーエラー)</text>
  <text x="120" y="910" class="label" fill="#333">• <tspan font-weight="bold">HTTPS</tspan>: HTTP over SSL/TLSで暗号化通信を実現（ポート443）</text>
  <text x="120" y="925" class="label" fill="#333">• <tspan font-weight="bold">Keep-Alive</tspan>: 複数のリクエスト/レスポンスで同じTCP接続を再利用</text>
  
</svg>
